#include <QtDebug>

#include <opencv2/opencv.hpp>
#include <opencv2/objdetect.hpp>
#include <opencv2/imgcodecs.hpp>
#include <opencv2/imgproc.hpp>
#include <opencv2/highgui.hpp>
#include <opencv2/calib3d.hpp>
#include <opencv2/core.hpp>
#include <opencv2/videoio.hpp>
#include <opencv2/videostab.hpp>
#include "cameraopentest.h"
#include "ui_cameraopentest.h"

CameraOpenTest::CameraOpenTest(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::CameraOpenTest)
{
    ui->setupUi(this);
}

CameraOpenTest::~CameraOpenTest()
{
    delete ui;
}

void CameraOpenTest::on_commandLinkButton_clicked()
{
    capture.open(iCameraId);
    qDebug() << "Opening Camera nr: " << iCameraId;
    if(!capture.isOpened()) {
        qDebug() << "Camera open problem";
        ui->comboBox->setStyleSheet("color: #ee3333");
    }
    else {
        qDebug() << "Camera is open";
        ui->comboBox->setStyleSheet("color: #0066cc");
    }
}

void CameraOpenTest::on_comboBox_activated(int index)
{
    qDebug() << "Changing Camera nr: " << iCameraId << " to: " << index;
    iCameraId = index;
}
